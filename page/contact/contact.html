<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <link rel="stylesheet" href="contactstyle.css">
</head>
<body>
    <div class="sidebar">
        <img src="../../ressource/logodampierre.png" alt="dampierre">
        <ul>
          <li><a href="../../index.html">Accueil</a></li>
          <li><a href="../presentation_bts/presentationBTS.html">Présentation du BTS</a></li>
          <li><a href="../cv/cv.html" target="_blank">CV</a></li>
          <li><a href="../stage/stage.html">Stage & Expérience</a></li>
          <li><a href="../project/project.html">Projet Réalisé</a></li>
          <li><a href="../veille_techno/veille_techno.html">Veille technologique</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
    </div>
      <div class="main-content">

        <div class="contact-form">
          <h2>Contactez-moi</h2>
          <form id="contact-form">
            <label for="name">Nom :</label>
            <input type="text" id="name" name="name" required>
      
            <label for="email">Email :</label>
            <input type="email" id="email" name="email" required>
      
            <label for="message">Message :</label>
            <textarea id="message" name="message" rows="5" required></textarea>
      
            <button type="submit">Envoyer</button>
          </form>
          <p id="status"></p>
        </div>
      
        <script>
          document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault();
      
            const serviceID = 'service_a7n10lf';
            const templateID = 'template_icdny06';
            const userID = '-yNZb3Wi8EBzXcY6c';
      
            // Collecte des données du formulaire
            const templateParams = {
              username: document.getElementById('name').value,
              email: document.getElementById('email').value,
              message: document.getElementById('message').value
            };
      
            const data = {
              service_id: serviceID,
              template_id: templateID,
              user_id: userID,
              template_params: templateParams
            };
      
            // Envoi de la requête avec Fetch API
            fetch('https://api.emailjs.com/api/v1.0/email/send', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(data)
            })
            .then(response => {
              if (response.ok) {
                document.getElementById('status').textContent = "Votre message a été envoyé avec succès.";
                document.getElementById('contact-form').reset();
              } else {
                return response.json().then(err => { throw err; });
              }
            })
            .catch(error => {
              document.getElementById('status').textContent = "Une erreur s'est produite lors de l'envoi de votre message : " + error;
            });
          });
        </script>

      </div>
</body>
</html>